<div class="container">
  <div class="row col-7 mt-5 mb-4 mx-auto">
    <div class="text-center title">
      <h1>予約完了画面</h1>
    </div>
    <table class="table mt-3 content">
      <tr>
        <th class="text-center">日付：<td><%= @reservation.day.strftime('%Y年%m月%d日') %></td></th>
      </tr>
      <tr>
        <% if user_signed_in? %>
          <th class="text-center">時間：<td><%= @reservation.start_time.strftime("%H:%M") %></td></th>
        <% elsif temple_signed_in? %>
          <th class="text-center">時間：<td><%= @reservation.start_time.strftime("%H:%M") %>　-　<%= @reservation.end_time.strftime("%H:%M") %></td></th>
        <% end %>
      </tr>
      <tr>
        <% if @reservation.user.present? %>
          <th class="text-center">ユーザー名：　　　<td><%= @reservation.user.name %></td></th>
        <% elsif @reservation.new_user_name.present? %>
          <th class="text-center">ユーザー名：　　　<td><%= @reservation.new_user_name %></td></th>
        <% elsif @reservation.temple.present? %>
          <th class="text-center">ユーザー名：　　　<td><%= @reservation.temple.name %></td></th>
        <% end %>
      </tr>
      <tr>
        <th class="text-center">ステータス：　　　<td><%= @reservation.reservation_status %></td></th>
      </tr>
      <% if temple_signed_in? %>
        <tr>
          <th class="text-center">備考欄：　　<td><%= @reservation.comment %></td></th>
        </tr>
      <% end %>
    </table>
    <div class="text-center">
      <% if user_signed_in? %>
        <% if @reservation.reservation_status == '確認中' || (@reservation.day != Time.zone.today && @reservation.day != Time.zone.tomorrow) %>
          <%= link_to "予約を取り消す", reservation_path(@reservation), method: :delete, "data-confirm" => "本当に削除しますか？" %>
        <% elsif @reservation.reservation_status == '確定' && (@reservation.day == Time.zone.today || @reservation.day == Time.zone.tomorrow) %>
          <p>※当日、翌日のキャンセルは直接お電話でお知らせください。</p>
          <p>TEL: <%= @temple.phone_number %></p>
        <% end %>
      <% elsif admin_signed_in? %>
        <%= link_to "予約を取り消す", temples_reservations_by_day_path(id: @reservation.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
      <% end %>
    </div>
    <% if user_signed_in? %>
      <div>
        <p>※まだ予約は確定されていません。お寺から確認のお電話を致しますのでお待ちください。</p>
        <p>※お寺の都合により予約をされた場合でもご希望の日時に添えない場合がございますがご了承ください。</p>
      </div>
    <% end %>
    <div class="text-center mt-3">
      <%= link_to '予約画面に戻る', temples_reservations_month_path %><br>
      <br>
      <% if temple_signed_in? %>
        <%= link_to "スケジュール画面へ", temples_reservations_by_day_path(day: @reservation.day.to_date), from_link: true %>
      <% elsif user_signed_in? %>
        <%= link_to "予約一覧へ", reservations_path %>
      <% end %>
    </div>
  </div>
</div>
